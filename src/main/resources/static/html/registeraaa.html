<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../css/register111.css">
		<style>
			body {
	   	 			margin:0;
	   	 			background: url(../img/122.jpg);
					background-attachment: fixed;
					/*background: #00F7DE;*/
	   	 			
			}
			
		</style>
		
	</head>
	<body>
		<div class="goods w">
				<h1>欢迎注册</h1>
		</div>
		
		
		<div class="b">
			<div class="b_left">
				<form action="" method="" onkeydown="if(event.keyCode==13)return false;">

				<div class="register-box">
					<label for="name" class="username_label"><span>用 户 名</span>
					<input maxlength="20" id="name" type="text" placeholder="您的用户名和登录名">
					</label>
					<div class="tips">
						
					</div>
				</div>
				<div class="register-box">
					<label for="password" class="other_label"><span>设 置 密 码</span>
					<input maxlength="20"  id="password" type="password" placeholder="建议使用两种字符组合">
					</label>
					<div class="tips">
						
					</div>
				</div>
				<div class="register-box">
					<label for="password2" class="other_label"><span>确 认 密 码</span>
					<input maxlength="20" id="password2" type="password" placeholder="请再次输入密码">
					</label>
					<div class="tips">
						
					</div>
				</div>
				
				<div class="register-box">
					<label for="email" class="email_label"><span>邮    箱</span>
					<input maxlength="20" id="email" type="text" placeholder="请输入邮箱">
					</label>
					<div class="tips">
						
					</div>
				</div>
				 
				<div class="register-box">
						<label for="address" class="other_label"><span>地   址</span>
						<input maxlength="20" id="address" type="text" placeholder="请输入地址">
						</label>
						<div class="tips">
							
						</div>
				</div>
					
				 
				
				</form>	
				
			</div>		
			<div class="b_right">
				<form action="" method="" onkeydown="if(event.keyCode==13)return false;">	
					
					
					<div class="register-box">
						<label for="phone" class="other_label"><span>中国 0086∨</span>
							<input class="phone"  id="phone" maxlength="20" type="text" placeholder="建议使用常用手机">
						</label>
						<div class="tips">
							
						</div>
					</div>
					<div class="register-box">
						<label for="message" class="other_label"><span>验证码</span>
							<input maxlength="20" id="message" type="text" placeholder="请输入验证码">
						</label>
						<div class="tips">
							
						</div>
					</div>
					 
					<div class="radio">
					  <div class="r_left">
						 	<a href="loginaaa.html">直接登录</a>
					  </div>
					  <div class="r_right">	
						 <button type="button" value="test" onclick="sendMessage()" >获取验证码</button>
					  </div>	
				   </div>
					
					 
					 
					<div class="radio">
					  <div class="r_left">
						<input type="radio"  id="buyer" name="role" checked="checked" value="1"><label for="buyer">买家</label>
					  </div>
					  <div class="r_right">	
						<input type="radio"  id="seller" name="role" value="2"><label for="seller">卖家</label>
					  </div>	
				   </div>

					<div class="arguement">
						<input type="checkbox" id="xieyi">
						阅读并同意
						<a href="">《天狗用户注册协议》</a>
						<a href="">《隐私政策》</a>
						<div class="tips">

						</div>
					</div>


					<div class="submit_btn">
						<button type="submit" id="submit_btn" onclick="userRegister()">立 即 注 册</button>
					</div>
				</form>	
			</div>		
		</div>
			
	</body>
	<script src="../js/jquery-3.2.1.min.js" charset="utf-8"></script>
	<script src="../js/form.js" type="text/javascript" charset="utf-8"></script>

	<script>
        //var receiveMessage;

        function sendMessage() {
            $.ajax({
                type:'post',
                url:'/user/sendVericode',
                async:true,
                dataType:'json',
                data:{
                    phone:$('#phone').val(),
                },
                success:function (data) {
                    if(data.code==1)
                        alert(data.msg);

                },
                error:function () {

                }
            })
        }

        function userRegister() {

            $.ajax({
                type:'post',
                url:'/user/register',
                async:true,
                dataType:'json',
                data:{
                    name:$('#name').val(),
                    password:$('#password').val(),
                    email:$('#email').val(),
                    address:$('#address').val(),
                    role_id:$("input[name='role']:checked").val(),
                    phone:$('#phone').val(),
                    message:$('#message').val()
                },
                success:function (data) {
                    if(data.code == -1){
                        alert(data.msg);
                    }
                    else{
                        alert(data.msg);
                        window.location.href='loginaaa.html';

                    }
                },
                error:function () {
                    alert("注册失败");
                }
            })

        }


	</script>

</html>
