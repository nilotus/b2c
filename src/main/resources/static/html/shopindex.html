<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>店铺主页</title>
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/shop.css">
    <link rel="stylesheet" type="text/css" href="../css/goodsbrowse.css"/>
    <style>
        body {
            background-color: #f7f7f7;
        }
    </style>
</head>
<body>
<!--快速导航栏-->
<div class="shortcut w">

    <ul class="fl city">
        <li>
            <a href="../index.html">主页</a>
    </ul>
    <ul class="fr">
        <li>
            <div class="login-t">
                <a href="login.html">你好，请登录 </a>
                <a href="register.html" class="f10">免费注册</a>
            </div>
        <li class="space">
        <li>
            <a href="../html/order.html">我的订单</a>
        <li class="space">
        <li>
            <a href="../html/shopping-cart2.html">我的购物车</a>
        <li class="space">
        <li>
            <a href="../html/favourite1.html">我的收藏</a>
        <li class="space">
        <li>
            <a href="personal.html">个人中心</a>
    </ul>
</div>

<div class="container">
    <div class="jumbotron">
        <img src="" alt="">
        <h1>Hello, world!</h1>
        <p>...</p>
        <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p>
    </div>
</div>
<!--商品列表-->
<div class="w">
    <!--商品列表-->
    <div class="container list">
    </div>
</div>
</body>
<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.1.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">

</script>

<script>
    $(function () {
        $.ajax({
            type: 'post',
            url: '/user/getUserInfo',
            async: true,
            dataType: 'json',
            success: function (data) {
                if (data.code == -1) return;
                var str;
                str = 'Hi,' + data.data.name + '\
                            <a href="#" class="user-info">\
                            </a>\
                            <a href="login.html" class="f10">退出登录</a>';
                $('.login-t').html(str);
            },
            error: function () {
                alert("failed!");
            }
        })
    });
    $(function () {
        //获取url中的参数
        function getUrlParam(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
            var r = window.location.search.substr(1).match(reg); //匹配目标参数
            if (r != null) return unescape(r[2]);
            return null; //返回参数值
        }

        //接收URL中的参数shop_id
        var shop_id = getUrlParam('shop_id');
        console.log('shop_id:' + shop_id);
        $.ajax({
            type: "get",
            url: '/goods/shopinfo/' + shop_id,
            async: true,
            dataType: "json",
            success: function (data) {
                var str = "<ul>";
                $.each(data.data, function (index, val) {
                    str += "<li><a href='goodsindex.html?good_id=" + val.good_id + "'><img src=" + val.img + "></a>"
                        + "<p>" + val.name + "</p><p class='price'>" + val.price + "</p></li>";
                })

                str += "</ul>";
                $('.list').append(str);

            },
            error: function () {
                alert("failed!");
            }
        })
    })


</script>
</html>